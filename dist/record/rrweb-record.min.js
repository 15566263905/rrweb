var rrwebRecord=function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var t,e=function(){return(e=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function n(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(o=a.next()).done;)i.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i}function r(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t}!function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(t||(t={}));var a=1,i=RegExp("[^a-z1-6-_]");function u(t){try{var e=t.rules||t.cssRules;return e?Array.from(e).map(s).join(""):null}catch(t){return null}}function s(t){return function(t){return"styleSheet"in t}(t)?u(t.styleSheet)||"":t.cssText}var c,l,d,p,f,m=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,h=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/).*/,v=/^(data:)([\w\/\+\-]+);(charset=[\w-]+|base64|utf-?8).*,(.*)/i;function y(t,e){return(t||"").replace(m,(function(t,n,o,r,a,i){var u,s=o||a||i,c=n||r||"";if(!s)return t;if(!h.test(s))return"url("+c+s+c+")";if(v.test(s))return"url("+c+s+c+")";if("/"===s[0])return"url("+c+(((u=e).indexOf("//")>-1?u.split("/").slice(0,3).join("/"):u.split("/")[0]).split("?")[0]+s)+c+")";var l=e.split("/"),d=s.split("/");l.pop();for(var p=0,f=d;p<f.length;p++){var m=f[p];"."!==m&&(".."===m?l.pop():l.push(m))}return"url("+c+l.join("/")+c+")"}))}function g(t,e){if(!e||""===e.trim())return e;var n=t.createElement("a");return n.href=e,n.href}function b(t,e,n){return"src"===e||"href"===e&&n?g(t,n):"srcset"===e&&n?function(t,e){return""===e.trim()?e:e.split(",").map((function(e){var n=e.trimLeft().trimRight().split(" ");return 2===n.length?g(t,n[0])+" "+n[1]:1===n.length?""+g(t,n[0]):""})).join(", ")}(t,n):"style"===e&&n?y(n,location.href):n}function S(e,n,o,r,a,s,c){var l,d;if(void 0===s&&(s={}),n.__sn){var p=n.__sn.id;l=1===p?void 0:p}switch(e.nodeType){case e.DOCUMENT_NODE:return{type:t.Document,childNodes:[],rootId:l};case e.DOCUMENT_TYPE_NODE:return{type:t.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:l};case e.ELEMENT_NODE:for(var f=function(t,e,n){if("string"==typeof e){if(t.classList.contains(e))return!0}else t.classList.forEach((function(t){if(e.test(t))return!0}));return!!n&&t.matches(n)}(e,o,r),m=function(t){var e=t.toLowerCase().trim();return i.test(e)?"div":e}(e.tagName),h={},v=0,g=Array.from(e.attributes);v<g.length;v++){var S=g[v],C=S.name,w=S.value;h[C]=b(n,C,w)}if("link"===m&&a){var E,_=Array.from(n.styleSheets).find((function(t){return t.href===e.href}));(E=u(_))&&(delete h.rel,delete h.href,h._cssText=y(E,_.href))}if("style"===m&&e.sheet&&!(e.innerText||e.textContent||"").trim().length)(E=u(e.sheet))&&(h._cssText=y(E,location.href));if("input"===m||"textarea"===m||"select"===m){w=e.value;"radio"!==h.type&&"checkbox"!==h.type&&"submit"!==h.type&&"button"!==h.type&&w?h.value=s[h.type]||s[m]?"*".repeat(w.length):w:e.checked&&(h.checked=e.checked)}if("option"===m){var I=e.parentElement;h.value===I.value&&(h.selected=e.selected)}if("canvas"===m&&c&&(h.rr_dataURL=e.toDataURL()),"audio"!==m&&"video"!==m||(h.rr_mediaState=e.paused?"paused":"played"),e.scrollLeft&&(h.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(h.rr_scrollTop=e.scrollTop),f){var x=e.getBoundingClientRect(),M=x.width,N=x.height;h.rr_width=M+"px",h.rr_height=N+"px"}return{type:t.Element,tagName:m,attributes:h,childNodes:[],isSVG:(d=e,"svg"===d.tagName||d instanceof SVGElement||void 0),needBlock:f,rootId:l};case e.TEXT_NODE:var T=e.parentNode&&e.parentNode.tagName,k=e.textContent,D="STYLE"===T||void 0;return D&&k&&(k=y(k,location.href)),"SCRIPT"===T&&(k="SCRIPT_PLACEHOLDER"),{type:t.Text,textContent:k||"",isStyle:D,rootId:l};case e.CDATA_SECTION_NODE:return{type:t.CDATA,textContent:"",rootId:l};case e.COMMENT_NODE:return{type:t.Comment,textContent:e.textContent||"",rootId:l};default:return!1}}function C(t){return void 0===t?"":t.toLowerCase()}function w(e,n,o,r,i,u,s,c,l,d,p,f){void 0===u&&(u=!1),void 0===s&&(s=!0),void 0===l&&(l={}),void 0===p&&(p=!0);var m,h=S(e,n,r,i,s,c,d||!1);if(!h)return console.warn(e,"not serialized"),null;m="__sn"in e?e.__sn.id:!function(e,n){if(n.comment&&e.type===t.Comment)return!0;if(e.type===t.Element){if(n.script&&("script"===e.tagName||"link"===e.tagName&&"preload"===e.attributes.rel&&"script"===e.attributes.as))return!0;if(n.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(C(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===C(e.attributes.name)||"icon"===C(e.attributes.rel)||"apple-touch-icon"===C(e.attributes.rel)||"shortcut icon"===C(e.attributes.rel))))return!0;if("meta"===e.tagName){if(n.headMetaDescKeywords&&C(e.attributes.name).match(/^description|keywords$/))return!0;if(n.headMetaSocial&&(C(e.attributes.property).match(/^(og|twitter|fb):/)||C(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===C(e.attributes.name)))return!0;if(n.headMetaRobots&&("robots"===C(e.attributes.name)||"googlebot"===C(e.attributes.name)||"bingbot"===C(e.attributes.name)))return!0;if(n.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(n.headMetaAuthorship&&("author"===C(e.attributes.name)||"generator"===C(e.attributes.name)||"framework"===C(e.attributes.name)||"publisher"===C(e.attributes.name)||"progid"===C(e.attributes.name)||C(e.attributes.property).match(/^article:/)||C(e.attributes.property).match(/^product:/)))return!0;if(n.headMetaVerification&&("google-site-verification"===C(e.attributes.name)||"yandex-verification"===C(e.attributes.name)||"csrf-token"===C(e.attributes.name)||"p:domain_verify"===C(e.attributes.name)||"verify-v1"===C(e.attributes.name)||"verification"===C(e.attributes.name)||"shopify-checkout-api-token"===C(e.attributes.name)))return!0}}return!1}(h,l)&&(p||h.type!==t.Text||h.isStyle||h.textContent.replace(/^\s+|\s+$/gm,"").length)?a++:-2;var v=Object.assign(h,{id:m});if(e.__sn=v,-2===m)return null;o[m]=e,f&&f(e);var y=!u;if(v.type===t.Element&&(y=y&&!v.needBlock,delete v.needBlock),(v.type===t.Document||v.type===t.Element)&&y){l.headWhitespace&&h.type===t.Element&&"head"==h.tagName&&(p=!1);for(var g=0,b=Array.from(e.childNodes);g<b.length;g++){var E=w(b[g],n,o,r,i,u,s,c,l,d,p);E&&v.childNodes.push(E)}}if(v.type===t.Element&&"iframe"===v.tagName){var _=e.contentDocument;if(_){var I=w(_,_,o,r,i,!1,s,c,l,d);I&&v.childNodes.push(I)}}return v}function E(t,e,n){void 0===n&&(n=document);var o={capture:!0,passive:!0};return n.addEventListener(t,e,o),function(){return n.removeEventListener(t,e,o)}}!function(t){t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom"}(c||(c={})),function(t){t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font"}(l||(l={})),function(t){t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd"}(d||(d={})),function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause"}(p||(p={})),function(t){t.Start="start",t.Pause="pause",t.Resume="resume",t.Resize="resize",t.Finish="finish",t.FullsnapshotRebuilded="fullsnapshot-rebuilded",t.LoadStylesheetStart="load-stylesheet-start",t.LoadStylesheetEnd="load-stylesheet-end",t.SkipStart="skip-start",t.SkipEnd="skip-end",t.MouseInteraction="mouse-interaction",t.EventCast="event-cast",t.CustomEvent="custom-event",t.Flush="flush",t.StateChange="state-change"}(f||(f={}));var _={map:{},getId:function(t){return t.__sn?t.__sn.id:-1},getNode:function(t){return _.map[t]||null},removeNodeFromMap:function(t){var e=t.__sn&&t.__sn.id;delete _.map[e],t.childNodes&&t.childNodes.forEach((function(t){return _.removeNodeFromMap(t)}))},has:function(t){return _.map.hasOwnProperty(t)}};function I(t,e,n){void 0===n&&(n={});var o=null,r=0;return function(a){var i=Date.now();r||!1!==n.leading||(r=i);var u=e-(i-r),s=this,c=arguments;u<=0||u>e?(o&&(window.clearTimeout(o),o=null),r=i,t.apply(s,c)):o||!1===n.trailing||(o=window.setTimeout((function(){r=!1===n.leading?0:Date.now(),o=null,t.apply(s,c)}),u))}}function x(t,e,n,o,r){void 0===r&&(r=window);var a=r.Object.getOwnPropertyDescriptor(t,e);return r.Object.defineProperty(t,e,o?n:{set:function(t){var e=this;setTimeout((function(){n.set.call(e,t)}),0),a&&a.set&&a.set.call(this,t)}}),function(){return x(t,e,a||{},!0)}}function M(t,e,n){try{if(!(e in t))return function(){};var o=t[e],r=n(o);return"function"==typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__rrweb_original__:{enumerable:!1,value:o}})),t[e]=r,function(){t[e]=o}}catch(t){return function(){}}}function N(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function T(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function k(t,e){if(!t)return!1;if(t.nodeType===t.ELEMENT_NODE){var n=!1;return"string"==typeof e?n=t.classList.contains(e):t.classList.forEach((function(t){e.test(t)&&(n=!0)})),n||k(t.parentNode,e)}return t.nodeType,t.TEXT_NODE,k(t.parentNode,e)}function D(t){return Boolean(t.changedTouches)}var L={x:0,y:0};function O(){var t=0,e=0,n=new WeakMap;return function o(r){r.querySelectorAll("iframe").forEach((function(r){t+=r.offsetLeft,e+=r.offsetTop,n.set(r,{x:t,y:e}),r.contentDocument&&o(r.contentDocument)}))}(document),n}function R(t,e){return"__list"in t&&t.__list!==e?(console.log("???",t,t.__list,e),!1):"__ln"in t}var F=function(){function t(){this.length=0,this.head=null}return t.prototype.get=function(t){if(t>=this.length)throw new Error("Position outside of list range");for(var e=this.head,n=0;n<t;n++)e=(null==e?void 0:e.next)||null;return e},t.prototype.addNode=function(t){var e={value:t,previous:null,next:null};if(t.__ln=e,t.__list=this,t.previousSibling&&R(t.previousSibling,this)){var n=t.previousSibling.__ln.next;e.next=n,e.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=e,n&&(n.previous=e)}else if(t.nextSibling&&R(t.nextSibling,this)){n=t.nextSibling.__ln.previous;e.previous=n,e.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=e,n&&(n.next=e)}else this.head&&(this.head.previous=e),e.next=this.head,this.head=e;if(this.length++,!this.get(this.length-1))throw console.log("!!!",t,this),new Error("stop")},t.prototype.removeNode=function(t){var e=t.__ln;this.head&&(e.previous?(e.previous.next=e.next,e.next&&(e.next.previous=e.previous)):(this.head=e.next,this.head&&(this.head.previous=null)),t.__ln&&delete t.__ln,this.length--)},t}(),z=function(t,e){return t+"@"+e};function A(t){return"__sn"in t}function P(t,e){t.delete(e),e.childNodes.forEach((function(e){return P(t,e)}))}function j(t,e){var n=e.parentNode;if(!n)return!1;var o=_.getId(n);return!!t.some((function(t){return t.id===o}))||j(t,n)}function H(t,e){var n=e.parentNode;return!!n&&(!!t.has(n)||H(t,n))}var V=new(function(){function e(){var e=this;this.frozen=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=function(t){t.forEach(e.processMutation),e.frozen||e.emit()},this.emit=function(){for(var o,r,a,i,u=[],s=new F,c=function(t){var n=t.nextSibling&&_.getId(t.nextSibling);return-1===n&&k(t.nextSibling,e.blockClass)&&(n=null),n},l=function(n){if(n.parentNode){var o=_.getId(n.parentNode),r=c(n);if(-1===o||-1===r)return s.addNode(n);u.push({parentId:o,nextId:r,node:w(n,e.doc,_.map,e.blockClass,null,!0,e.inlineStylesheet,e.maskInputOptions,void 0,e.recordCanvas,void 0,(function(n){n.__sn.type===t.Element&&"iframe"===n.__sn.tagName&&(n.onload=function(){e.doIframe(n)})}))})}};e.mapRemoves.length;)_.removeNodeFromMap(e.mapRemoves.shift());try{for(var d=n(e.movedSet),p=d.next();!p.done;p=d.next()){var f=p.value;j(e.removes,f)&&!e.movedSet.has(f.parentNode)||l(f)}}catch(t){o={error:t}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(o)throw o.error}}try{for(var m=n(e.addedSet),h=m.next();!h.done;h=m.next()){f=h.value;H(e.droppedSet,f)||j(e.removes,f)?H(e.movedSet,f)?l(f):e.droppedSet.add(f):l(f)}}catch(t){a={error:t}}finally{try{h&&!h.done&&(i=m.return)&&i.call(m)}finally{if(a)throw a.error}}for(var v=null;s.length;){var y=null;if(v){var g=_.getId(v.value.parentNode),b=c(v.value);-1!==g&&-1!==b&&(y=v)}if(!y)for(var S=s.length-1;S>=0;S--){var C=s.get(S);g=_.getId(C.value.parentNode),b=c(C.value);if(-1!==g&&-1!==b){y=C;break}}if(!y)break;v=y.previous,s.removeNode(y.value),l(y.value)}var E={texts:e.texts.map((function(t){return{id:_.getId(t.node),value:t.value}})).filter((function(t){return _.has(t.id)})),attributes:e.attributes.map((function(t){return{id:_.getId(t.node),attributes:t.attributes}})).filter((function(t){return _.has(t.id)})),removes:e.removes,adds:u};(E.texts.length||E.attributes.length||E.removes.length||E.adds.length)&&(e.texts=[],e.attributes=[],e.removes=[],e.addedSet=new Set,e.movedSet=new Set,e.droppedSet=new Set,e.movedMap={},e.emissionCallback(E))},this.processMutation=function(t){switch(t.type){case"characterData":var n=t.target.textContent;k(t.target,e.blockClass)||n===t.oldValue||e.texts.push({value:n,node:t.target});break;case"attributes":n=t.target.getAttribute(t.attributeName);if(k(t.target,e.blockClass)||n===t.oldValue)return;var o=e.attributes.find((function(e){return e.node===t.target}));o||(o={node:t.target,attributes:{}},e.attributes.push(o)),o.attributes[t.attributeName]=b(e.doc,t.attributeName,n);break;case"childList":t.addedNodes.forEach((function(n){return e.genAdds(n,t.target)})),t.removedNodes.forEach((function(n){var o=_.getId(n),r=_.getId(t.target);k(n,e.blockClass)||k(t.target,e.blockClass)||(e.addedSet.has(n)?(P(e.addedSet,n),e.droppedSet.add(n)):e.addedSet.has(t.target)&&-1===o||function t(e){var n=_.getId(e);return!_.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||t(e.parentNode))}(t.target)||(e.movedSet.has(n)&&e.movedMap[z(o,r)]?P(e.movedSet,n):e.removes.push({parentId:r,id:o})),e.mapRemoves.push(n))}))}},this.genAdds=function(t,n){if(!k(t,e.blockClass)){if(A(t)){e.movedSet.add(t);var o=null;n&&A(n)&&(o=n.__sn.id),o&&(e.movedMap[z(t.__sn.id,o)]=!0)}else e.addedSet.add(t),e.droppedSet.delete(t);t.childNodes.forEach((function(t){return e.genAdds(t)}))}}}return e.prototype.init=function(t,e,n,o,r,a,i){this.blockClass=e,this.inlineStylesheet=n,this.maskInputOptions=o,this.recordCanvas=r,this.emissionCallback=t,this.doc=a,this.doIframe=i},e.prototype.freeze=function(){this.frozen=!0},e.prototype.unfreeze=function(){this.frozen=!1},e.prototype.isFrozen=function(){return this.frozen},e}());function U(t,e,n,o,r){if(!1===r.mouseInteraction)return function(){};var a=!0===r.mouseInteraction||void 0===r.mouseInteraction?{}:r.mouseInteraction,i=[];return Object.keys(d).filter((function(t){return Number.isNaN(Number(t))&&!t.endsWith("_Departed")&&!1!==a[t]})).forEach((function(r){var a=r.toLowerCase(),u=function(e){return function(r){if(!k(r.target,o)){var a=_.getId(r.target),i=D(r)?r.changedTouches[0]:r,u=i.clientX,s=i.clientY;t({type:d[e],id:a,x:n.x+u,y:n.y+s})}}}(r);i.push(E(a,u,e))})),function(){i.forEach((function(t){return t()}))}}var W,B=["INPUT","TEXTAREA","SELECT"],X=new WeakMap;function q(t,o,a){void 0===o&&(o={}),function(t,e){var n=t.mutationCb,o=t.mousemoveCb,a=t.mouseInteractionCb,i=t.scrollCb,u=t.viewportResizeCb,s=t.inputCb,c=t.mediaInteractionCb,l=t.styleSheetRuleCb,d=t.canvasMutationCb,p=t.fontCb;t.mutationCb=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];e.mutation&&e.mutation.apply(e,r(t)),n.apply(void 0,r(t))},t.mousemoveCb=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.mousemove&&e.mousemove.apply(e,r(t)),o.apply(void 0,r(t))},t.mouseInteractionCb=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.mouseInteraction&&e.mouseInteraction.apply(e,r(t)),a.apply(void 0,r(t))},t.scrollCb=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.scroll&&e.scroll.apply(e,r(t)),i.apply(void 0,r(t))},t.viewportResizeCb=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.viewportResize&&e.viewportResize.apply(e,r(t)),u.apply(void 0,r(t))},t.inputCb=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.input&&e.input.apply(e,r(t)),s.apply(void 0,r(t))},t.mediaInteractionCb=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.mediaInteaction&&e.mediaInteaction.apply(e,r(t)),c.apply(void 0,r(t))},t.styleSheetRuleCb=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.styleSheetRule&&e.styleSheetRule.apply(e,r(t)),l.apply(void 0,r(t))},t.canvasMutationCb=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.canvasMutation&&e.canvasMutation.apply(e,r(t)),d.apply(void 0,r(t))},t.fontCb=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.font&&e.font.apply(e,r(t)),p.apply(void 0,r(t))}}(t,o);var i,u,s,c=function(t,e,n,o,r,a,i){V.init(t,n,o,r,a,e,i);var u=new MutationObserver(V.processMutations.bind(V));return console.log("ob",e),u.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),u}(t.mutationCb,t.doc,t.blockClass,t.inlineStylesheet,t.maskInputOptions,t.recordCanvas,a),d=function(t,e,n,o){if(!1===e.mousemove)return function(){};var r,a="number"==typeof e.mousemove?e.mousemove:50,i=[],u=I((function(e){var n=Date.now()-r;t(i.map((function(t){return t.timeOffset-=n,t})),e?l.TouchMove:l.MouseMove),i=[],r=null}),500),s=I((function(t){var e=t.target,n=D(t)?t.changedTouches[0]:t,a=n.clientX,s=n.clientY;r||(r=Date.now()),i.push({x:o.x+a,y:o.y+s,id:_.getId(e),timeOffset:Date.now()-r}),u(D(t))}),a,{trailing:!1}),c=[E("mousemove",s,n),E("touchmove",s,n)];return function(){c.forEach((function(t){return t()}))}}(t.mousemoveCb,t.sampling,t.doc,t.dimension),f=U(t.mouseInteractionCb,t.doc,t.dimension,t.blockClass,t.sampling),m=(i=t.scrollCb,u=t.doc,s=t.blockClass,E("scroll",I((function(t){if(t.target&&!k(t.target,s)){var e=_.getId(t.target);if(t.target===u){var n=u.scrollingElement||u.documentElement;i({id:e,x:n.scrollLeft,y:n.scrollTop})}else i({id:e,x:t.target.scrollLeft,y:t.target.scrollTop})}}),t.sampling.scroll||100))),h=function(t){return E("resize",I((function(){var e=N(),n=T();t({width:Number(n),height:Number(e)})}),200),window)}(t.viewportResizeCb),v=function(t,n,o,a,i,u){function s(t){var e=t.target;if(e&&e.tagName&&!(B.indexOf(e.tagName)<0)&&!k(e,o)){var r=e.type;if("password"!==r&&!e.classList.contains(a)){var u=e.value,s=!1;"radio"===r||"checkbox"===r?s=e.checked:(i[e.tagName.toLowerCase()]||i[r])&&(u="*".repeat(u.length)),c(e,{text:u,isChecked:s});var l=e.name;"radio"===r&&l&&s&&n.querySelectorAll('input[type="radio"][name="'+l+'"]').forEach((function(t){t!==e&&c(t,{text:t.value,isChecked:!s})}))}}}function c(n,o){var r=X.get(n);if(!r||r.text!==o.text||r.isChecked!==o.isChecked){X.set(n,o);var a=_.getId(n);t(e(e({},o),{id:a}))}}var l=("last"===u.input?["change"]:["input","change"]).map((function(t){return E(t,s,n)})),d=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),p=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"]];return d&&d.set&&l.push.apply(l,r(p.map((function(t){return x(t[0],t[1],{set:function(){s({target:this})}})})))),function(){l.forEach((function(t){return t()}))}}(t.inputCb,t.doc,t.blockClass,t.ignoreClass,t.maskInputOptions,t.sampling),y=function(t,e){var n=function(n){return function(o){var r=o.target;r&&!k(r,e)&&t({type:"play"===n?p.Play:p.Pause,id:_.getId(r)})}},o=[E("play",n("play")),E("pause",n("pause"))];return function(){o.forEach((function(t){return t()}))}}(t.mediaInteractionCb,t.blockClass),g=function(t){var e=CSSStyleSheet.prototype.insertRule;CSSStyleSheet.prototype.insertRule=function(n,o){var r=_.getId(this.ownerNode);return-1!==r&&t({id:r,adds:[{rule:n,index:o}]}),e.apply(this,arguments)};var n=CSSStyleSheet.prototype.deleteRule;return CSSStyleSheet.prototype.deleteRule=function(e){var o=_.getId(this.ownerNode);return-1!==o&&t({id:o,removes:[{index:e}]}),n.apply(this,arguments)},function(){CSSStyleSheet.prototype.insertRule=e,CSSStyleSheet.prototype.deleteRule=n}}(t.styleSheetRuleCb),b=t.recordCanvas?function(t,e){var o,a,i=Object.getOwnPropertyNames(CanvasRenderingContext2D.prototype),u=[],s=function(n){try{if("function"!=typeof CanvasRenderingContext2D.prototype[n])return"continue";var o=M(CanvasRenderingContext2D.prototype,n,(function(o){return function(){for(var a=this,i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];return k(this.canvas,e)||setTimeout((function(){var e=r(i);"drawImage"===n&&e[0]&&e[0]instanceof HTMLCanvasElement&&(e[0]=e[0].toDataURL()),t({id:_.getId(a.canvas),property:n,args:e})}),0),o.apply(this,i)}}));u.push(o)}catch(e){var a=x(CanvasRenderingContext2D.prototype,n,{set:function(e){t({id:_.getId(this.canvas),property:n,args:[e],setter:!0})}});u.push(a)}};try{for(var c=n(i),l=c.next();!l.done;l=c.next()){s(l.value)}}catch(t){o={error:t}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}return function(){u.forEach((function(t){return t()}))}}(t.canvasMutationCb,t.blockClass):function(){},S=t.collectFonts?function(t){var e=[],n=new WeakMap,o=FontFace;window.FontFace=function(t,e,r){var a=new o(t,e,r);return n.set(a,{family:t,buffer:"string"!=typeof e,descriptors:r,fontSource:"string"==typeof e?e:JSON.stringify(Array.from(new Uint8Array(e)))}),a};var r=M(document.fonts,"add",(function(e){return function(o){return setTimeout((function(){var e=n.get(o);e&&(t(e),n.delete(o))}),0),e.apply(this,[o])}}));return e.push((function(){window.FonFace=o})),e.push(r),function(){e.forEach((function(t){return t()}))}}(t.fontCb):function(){};return function(){c.disconnect(),d(),f(),m(),h(),v(),y(),g(),b(),S()}}function Y(t){return e(e({},t),{timestamp:Date.now()})}function $(n){void 0===n&&(n={});var a=n.emit,i=n.checkoutEveryNms,u=n.checkoutEveryNth,s=n.blockClass,d=void 0===s?"rr-block":s,p=n.ignoreClass,f=void 0===p?"rr-ignore":p,m=n.inlineStylesheet,h=void 0===m||m,v=n.maskAllInputs,y=n.maskInputOptions,g=n.hooks,b=n.packFn,S=n.sampling,C=void 0===S?{}:S,I=n.mousemoveWait,x=n.recordCanvas,M=void 0!==x&&x,k=n.collectFonts,D=void 0!==k&&k;if(!a)throw new Error("emit function is required");void 0!==I&&void 0===C.mousemove&&(C.mousemove=I);var R,F,z=!0===v?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:void 0!==y?y:{};void 0===R&&(R=window),"NodeList"in R&&!R.NodeList.prototype.forEach&&(R.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in R&&!R.DOMTokenList.prototype.forEach&&(R.DOMTokenList.prototype.forEach=Array.prototype.forEach);var A=0;W=function(t,e){if(!V.isFrozen()||t.type===c.FullSnapshot||t.type==c.IncrementalSnapshot&&t.data.source==l.Mutation||(V.emit(),V.unfreeze()),a(b?b(t):t,e),t.type===c.FullSnapshot)F=t,A=0;else if(t.type===c.IncrementalSnapshot){A++;var n=u&&A>=u,o=i&&t.timestamp-F.timestamp>i;(n||o)&&j(!0)}};var P=[];function j(e){var n,r,a,i;void 0===e&&(e=!1),W(Y({type:c.Meta,data:{href:window.location.href,width:T(),height:N()}}),e);var u=V.isFrozen();V.freeze();var s=o(function(t,e,n,o,r,a,i,u,s){void 0===e&&(e="rr-block"),void 0===n&&(n=!0),void 0===i&&(i=null);var c={};return[w(t,t,c,e,i,!1,n,!0===o?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===o?{}:o,!0===r||"all"===r?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===r,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===r?{}:r,a,u,s),c]}(document,d,h,z,!1,M,null,!0,(function(e){e.__sn.type===t.Element&&"iframe"===e.__sn.tagName&&P.push(e)})),2),l=s[0],p=s[1];if(!l)return console.warn("Failed to snapshot the document");_.map=p,W(Y({type:c.FullSnapshot,data:{node:l,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null===document||void 0===document?void 0:document.documentElement.scrollLeft)||(null===(r=null===(n=null===document||void 0===document?void 0:document.body)||void 0===n?void 0:n.parentElement)||void 0===r?void 0:r.scrollLeft)||(null===document||void 0===document?void 0:document.body.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null===document||void 0===document?void 0:document.documentElement.scrollTop)||(null===(i=null===(a=null===document||void 0===document?void 0:document.body)||void 0===a?void 0:a.parentElement)||void 0===i?void 0:i.scrollTop)||(null===document||void 0===document?void 0:document.body.scrollTop)||0}}})),u||(V.emit(),V.unfreeze())}try{var H,U=[];U.push(E("DOMContentLoaded",(function(){W(Y({type:c.DomContentLoaded,data:{}}))})));var B=function(t,n){return q({mutationCb:function(t){return W(Y({type:c.IncrementalSnapshot,data:e({source:l.Mutation},t)}))},mousemoveCb:function(t,e){return W(Y({type:c.IncrementalSnapshot,data:{source:e,positions:t}}))},mouseInteractionCb:function(t){return W(Y({type:c.IncrementalSnapshot,data:e({source:l.MouseInteraction},t)}))},scrollCb:function(t){return W(Y({type:c.IncrementalSnapshot,data:e({source:l.Scroll},t)}))},viewportResizeCb:function(t){return W(Y({type:c.IncrementalSnapshot,data:e({source:l.ViewportResize},t)}))},inputCb:function(t){return W(Y({type:c.IncrementalSnapshot,data:e({source:l.Input},t)}))},mediaInteractionCb:function(t){return W(Y({type:c.IncrementalSnapshot,data:e({source:l.MediaInteraction},t)}))},styleSheetRuleCb:function(t){return W(Y({type:c.IncrementalSnapshot,data:e({source:l.StyleSheetRule},t)}))},canvasMutationCb:function(t){return W(Y({type:c.IncrementalSnapshot,data:e({source:l.CanvasMutation},t)}))},fontCb:function(t){return W(Y({type:c.IncrementalSnapshot,data:e({source:l.Font},t)}))},blockClass:d,ignoreClass:f,maskInputOptions:z,inlineStylesheet:h,sampling:C,recordCanvas:M,collectFonts:D,doc:t,dimension:n},g,(function(t){var e=(H=O()).get(t);return console.assert(e,"iframe not found in the dimension map"),B(t.contentDocument,e||L)}))},X=function(){j(),H=O(),U.push.apply(U,r([B(document,L)],P.map((function(t){var e=H.get(t);return console.assert(e,"iframe not found in the dimension map"),B(t.contentDocument,e||L)}))))};return"interactive"===document.readyState||"complete"===document.readyState?X():U.push(E("load",(function(){W(Y({type:c.Load,data:{}})),X()}),window)),function(){U.forEach((function(t){return t()}))}}catch(t){console.warn(t)}}return $.addCustomEvent=function(t,e){if(!W)throw new Error("please add custom event after start recording");W(Y({type:c.Custom,data:{tag:t,payload:e}}))},$.freezePage=function(){V.freeze()},$}();
//# sourceMappingURL=rrweb-record.min.js.map
